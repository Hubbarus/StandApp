<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>
        Information Stand Of Shop
    </title>

    <style type="text/css">
        .Bimage{
            background-image:url(#{request.contextPath}/resources/images/bg_image.jpg);
            background-size: 100%;
        }

        .value {
            font-weight: bold;
        }

        .ui-carousel {
            margin-bottom: 20px;
        }
    </style>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
</h:head>

<h:body styleClass="Bimage">
    <div class="fc-center fa-align-center pt-10">
        <div class="mt-3 mb-3 fc-center" style="width: 100%;" align="center">
            <h2><h:outputText id="greet" value="#{jsfModel.hello}"/></h2>
        </div>

        <div class="mt-3 mb-3 fc-center" style="width: 100%;" align="center">
        <h:form id="form">
            <p:carousel value="#{jsfModel.items}"
                        headerText="Top 10 Items of Your Favorite Shop"
                        var="item"
                        itemStyle="text-align:center; width: 1%;"
                        responsive="true">
                <p:panelGrid columns="2"
                             style="width:100%; margin:10px 0px"
                             columnClasses="label,value"
                             layout="grid"
                             styleClass="ui-panelgrid-blank">
                    <f:facet name="header">
                        <p:graphicImage value="http://localhost:8080#{item.pathToIMG}" height="150"/>
                    </f:facet>

                    <h:outputText value="Name:" />
                    <h:outputText value="#{item.itemName}" />

                    <h:outputText value="Category" />
                    <h:outputText value="#{item.itemGroup}" />

                    <h:outputText value="Price" />
                    <h:outputText value="$#{item.price}" />
                </p:panelGrid>
            </p:carousel>

            <p:socket onMessage="handleMessage" onOpen="open" channel="/push" autoConnect="true"/>
            <script type="text/javascript">
                function handleMessage(data) {
                    console.log("message received")
                    updateWidgets();
                }

                function open() {
                    console.log("Connection established")
                }
            </script>

            <p:remoteCommand id="comm" name="updateWidgets"
                             update="form"/>
        </h:form>
        </div>
    </div>
</h:body>
</html>